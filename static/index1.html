<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ü–æ–∏—Å–∫ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</title>
  <style>
    /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f4f4f4;
      padding: 24px;
    }
    .search-container {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
      max-width: 1200px;
      margin: 0 auto;
    }
    #search {
      flex: 1;
      padding: 14px 24px;
      border: 1px solid #cccccc;
      border-radius: 32px;
      font-size: 16px;
      outline: none;
      transition: all 0.2s;
    }
    #search:focus {
      border-color: #ff385c;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .filter-btn {
      padding: 12px 24px;
      background: #ffffff;
      border: 1px solid #cccccc;
      border-radius: 32px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s;
    }
    .filter-btn:hover {
      border-color: #ff385c;
      color: #ff385c;
    }
    .filters-panel {
      position: fixed;
      top: 80px;
      right: 24px;
      background: #ffffff;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.15);
      width: 400px;
      max-height: 80vh;
      overflow-y: auto;
      border: 1px solid #e0e0e0;
      display: none;
      z-index: 1000;
    }
    .filters-section {
      margin-bottom: 24px;
      padding-bottom: 12px;
      border-bottom: 1px solid #e0e0e0;
    }
    .filters-section:last-child {
      border-bottom: none;
    }
    .filters-section h3 {
      font-size: 16px;
      margin-bottom: 12px;
      color: #333333;
    }
    .slider-container {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .slider-container span {
      font-size: 14px;
      color: #333;
      min-width: 40px;
      text-align: center;
    }
    input[type="range"] {
      flex: 1;
    }
    select {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      border: 1px solid #cccccc;
      border-radius: 4px;
      background: #ffffff;
      outline: none;
    }
    .filter-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .filter-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      padding: 8px 12px;
      border: 1px solid #dddddd;
      border-radius: 20px;
      background: #fafafa;
      transition: background 0.2s, border-color 0.2s;
    }
    .filter-item:hover {
      background: #f0f0f0;
      border-color: #ff385c;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 24px;
      max-width: 1200px;
      margin: 24px auto 0; /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –º–µ–∂–¥—É –ø–æ–∏—Å–∫–æ–º –∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ */
    }
    .listing {
      background: #ffffff;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .listing:hover {
      transform: translateY(-4px);
    }
    .slider {
      position: relative;
    }
    .slider img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      display: block;
    }
    .slider-controls {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 4px;
    }
    .slider-btn {
      width: 12px;
      height: 12px;
      border: 1px solid rgba(255,255,255,0.8);
      background: rgba(255,255,255,0.5);
      border-radius: 50%;
      cursor: pointer;
      padding: 0;
      outline: none;
      border: none;
    }
    .slider-btn:hover {
      background: rgba(255,255,255,0.8);
    }
    .listing-info {
      padding: 16px;
    }
    .listing-info h3 {
      font-size: 18px;
      margin-bottom: 8px;
    }
    .listing-info p {
      color: #666666;
      font-size: 14px;
      margin-bottom: 4px;
    }
  </style>
</head>
<body>
  <div class="search-container">
    <input type="text" id="search" placeholder="üîç –ü–æ–∏—Å–∫ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏..." />
    <button class="filter-btn" onclick="toggleFilters()">‚öôÔ∏è –§–∏–ª—å—Ç—Ä—ã</button>
    <button class="filter-btn" onclick="switchLanguage('en')">En</button>
  </div>

  <div class="filters-panel" id="filtersPanel">
    <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ (–æ–¥–∏–Ω –ø–æ–ª–∑—É–Ω–æ–∫) -->
    <div class="filters-section">
      <h3>–¶–µ–Ω–∞</h3>
      <div class="slider-container">
        <span>0</span>
        <input type="range" id="price" min="0" max="35000" step="500" value="35000" oninput="updatePriceDisplay()">
        <span id="priceDisplay">35000</span>
      </div>
    </div>
    <!-- –§–∏–ª—å—Ç—Ä –ø–æ –ø–ª–æ—â–∞–¥–∏ (–æ–¥–∏–Ω –ø–æ–ª–∑—É–Ω–æ–∫) -->
    <div class="filters-section">
      <h3>–ü–ª–æ—â–∞–¥—å</h3>
      <div class="slider-container">
        <span>0</span>
        <input type="range" id="area" min="0" max="200" step="5" value="200" oninput="updateAreaDisplay()">
        <span id="areaDisplay">200</span>
      </div>
    </div>
    <!-- –§–∏–ª—å—Ç—Ä –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–æ–º–Ω–∞—Ç (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫) -->
    <div class="filters-section">
      <h3>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç</h3>
      <select id="roomsSelect" onchange="renderListings()">
        <option value="0">–õ—é–±–æ–µ</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
      </select>
    </div>
    <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="filters-section">
      <h3>–¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è</h3>
      <div class="filter-group">
        <label class="filter-item">
          <input type="checkbox" name="action" value="–∞—Ä–µ–Ω–¥–∞" />
          –∞—Ä–µ–Ω–¥–∞
        </label>
        <label class="filter-item">
          <input type="checkbox" name="action" value="–ø–æ–∫—É–ø–∫–∞" />
          –ø–æ–∫—É–ø–∫–∞
        </label>
      </div>
    </div>
    <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ -->
    <div class="filters-section">
      <h3>–¢–∏–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</h3>
      <div class="filter-group">
        <label class="filter-item">
          <input type="checkbox" name="type" value="–∫–≤–∞—Ä—Ç–∏—Ä–∞" />
          –∫–≤–∞—Ä—Ç–∏—Ä–∞
        </label>
        <label class="filter-item">
          <input type="checkbox" name="type" value="–¥–æ–º" />
          –¥–æ–º
        </label>
      </div>
    </div>
    <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ –≥–æ—Ä–æ–¥—É -->
    <div class="filters-section">
      <h3>–ì–æ—Ä–æ–¥</h3>
      <div class="filter-group">
        <label class="filter-item">
          <input type="checkbox" name="city" value="–ê—Å—Ç–∞–Ω–∞" />
          –ê—Å—Ç–∞–Ω–∞
        </label>
        <label class="filter-item">
          <input type="checkbox" name="city" value="–ê–ª–º–∞—Ç—ã" />
          –ê–ª–º–∞—Ç—ã
        </label>
      </div>
    </div>
    <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ —É–¥–æ–±—Å—Ç–≤–∞–º -->
    <div class="filters-section">
      <h3>–£–¥–æ–±—Å—Ç–≤–∞</h3>
      <div class="filter-group">
        <label class="filter-item">
          <input type="checkbox" name="comfort" value="–∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä" />
          –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä
        </label>
      </div>
    </div>
    <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è–º -->
    <div class="filters-section">
      <h3>–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</h3>
      <div class="filter-group">
        <label class="filter-item">
          <input type="checkbox" name="entertainment" value="–±–∞—Å—Å–µ–π–Ω" />
          –±–∞—Å—Å–µ–π–Ω
        </label>
      </div>
    </div>
  </div>

  <div id="listings" class="grid"></div>

  <script>
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–∑—É–Ω–∫–∞ —Ü–µ–Ω—ã
    function updatePriceDisplay() {
      const val = document.getElementById("price").value;
      document.getElementById("priceDisplay").textContent = val;
      renderListings();
    }
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–∑—É–Ω–∫–∞ –ø–ª–æ—â–∞–¥–∏
    function updateAreaDisplay() {
      const val = document.getElementById("area").value;
      document.getElementById("areaDisplay").textContent = val;
      renderListings();
    }
    // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ –∏–∑ —Å—Ç—Ä–æ–∫–∏ —Ü–µ–Ω—ã
    function parsePrice(priceStr) {
      return parseInt(priceStr.replace(/\D/g, ''), 10);
    }
    // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ –∏–∑ —Å—Ç—Ä–æ–∫–∏ –ø–ª–æ—â–∞–¥–∏
    function parseArea(areaStr) {
      const match = areaStr.match(/\d+/);
      return match ? parseInt(match[0], 10) : 0;
    }
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ ML –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ FastAPI
    function sendQuery() {
      const query = document.getElementById("search").value;
      fetch("https://realty-ml-app2-189737689352.us-central1.run.app/parse", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ query: query })
      })
      .then(response => response.json())
      .then(data => {
        console.log("–û—Ç–≤–µ—Ç –æ—Ç ML –º–æ–¥–µ–ª–∏:", data);
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —á–µ–∫–±–æ–∫—Å—ã
        document.querySelectorAll('.filters-panel input[type="checkbox"]').forEach(checkbox => {
          checkbox.checked = false;
        });
        const recognized = data.mapped_result || {};
        if (recognized.action_types) {
          const actionValue = recognized.action_types.trim();
          const actionCheckbox = document.querySelector(`input[name="action"][value="${actionValue}"]`);
          if (actionCheckbox) { actionCheckbox.checked = true; }
        }
        if (recognized.realty_types) {
          const realtyValue = recognized.realty_types.trim();
          const realtyCheckbox = document.querySelector(`input[name="type"][value="${realtyValue}"]`);
          if (realtyCheckbox) { realtyCheckbox.checked = true; }
        }
        if (recognized.town) {
          const townValue = recognized.town.trim();
          const townCheckbox = document.querySelector(`input[name="city"][value="${townValue}"]`);
          if (townCheckbox) { townCheckbox.checked = true; }
        }
        if (Array.isArray(recognized.comfort)) {
          recognized.comfort.forEach(item => {
            const amenityValue = item.trim();
            const amenityCheckbox = document.querySelector(`input[name="comfort"][value="${comfortValue}"]`);
            if (amenityCheckbox) { amenityCheckbox.checked = true; }
          });
        }
        if (Array.isArray(recognized.entertainment)) {
          recognized.entertainment.forEach(item => {
            const entValue = item.trim();
            const entCheckbox = document.querySelector(`input[name="entertainment"][value="${entValue}"]`);
            if (entCheckbox) { entCheckbox.checked = true; }
          });
        }
        // –ï—Å–ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞ —Ü–µ–Ω–∞, –æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–∑—É–Ω–æ–∫
        if (recognized.price) {
          const priceValue = parseInt(recognized.price.replace(/\D/g, ''), 10);
          if (!isNaN(priceValue)) {
            document.getElementById("price").value = priceValue;
            document.getElementById("priceDisplay").textContent = priceValue;
          }
        }
        // –ï—Å–ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞ –ø–ª–æ—â–∞–¥—å, –æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–∑—É–Ω–æ–∫
        if (recognized.area) {
          const areaValue = parseArea(recognized.area);
          if (!isNaN(areaValue)) {
            document.getElementById("area").value = areaValue;
            document.getElementById("areaDisplay").textContent = areaValue;
          }
        }
        // –ï—Å–ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç, –æ–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±–æ—Ä –≤ select
        if (recognized.rooms) {
          const roomsValue = recognized.rooms.trim();
          document.getElementById("roomsSelect").value = roomsValue;
        }
        // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
        document.getElementById("search").value = "";
        renderListings();
      })
      .catch(err => console.error("–û—à–∏–±–∫–∞:", err));
    }
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–∞–Ω–µ–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    function toggleFilters() {
      const panel = document.getElementById("filtersPanel");
      panel.style.display = panel.style.display === "block" ? "none" : "block";
    }
    // –ú–∞—Å—Å–∏–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–π (—Ü–µ–Ω—ã, –ø–ª–æ—â–∞–¥–∏ –∏ –∫–æ–º–Ω–∞—Ç—ã ‚Äì —Å—Ç—Ä–æ–∫–∏/—á–∏—Å–ª–∞)
    const listings = [
      {
        id: 1,
        title: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ",
        price: "30000 ‚Ç∏",
        area: "65 –º2",
        rooms: 2,
        city: "–ê—Å—Ç–∞–Ω–∞",
        type: "–∫–≤–∞—Ä—Ç–∏—Ä–∞",
        action: "–∞—Ä–µ–Ω–¥–∞",
        amenities: ["–∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä", "–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Wi-Fi"],
        entertainment: ["smart tv"],
        images: [
          "https://a0.muscache.com/im/pictures/miso/Hosting-651835194444549195/original/42b07f95.jpeg",
          "https://a0.muscache.com/im/pictures/miso/Hosting-651835194444549195/original/62337cd4.jpeg",
          "https://a0.muscache.com/im/pictures/miso/Hosting-651835194444549195/original/6308d6e6.jpeg"
        ]
      },
      {
        id: 2,
        title: "–£—é—Ç–Ω—ã–π –¥–æ–º —Å —Å–∞–¥–æ–º",
        price: "35000 ‚Ç∏",
        area: "120 –º2",
        rooms: 3,
        city: "–ê–ª–º–∞—Ç—ã",
        type: "–î–æ–º",
        action: "–ø–æ–∫—É–ø–∫–∞",
        amenities: ["–≥–∞—Ä–∞–∂", "–∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä"],
        entertainment: ["–±–∞—Å—Å–µ–π–Ω"],
        images: [
          "https://a0.muscache.com/im/pictures/hosting/Hosting-1106558817486636034/original/af4e1799.jpeg",
          "https://a0.muscache.com/im/pictures/hosting/Hosting-1106558817486636034/original/08cd6d6b.jpeg",
          "https://a0.muscache.com/im/pictures/hosting/Hosting-1106558817486636034/original/f557c251.jpeg"
        ]
      },
      {
        id: 3,
        title: "–°—Ç–∏–ª—å–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å –≤–∏–¥–æ–º",
        price: "32000 ‚Ç∏",
        area: "75 –º2",
        rooms: 1,
        city: "–ê—Å—Ç–∞–Ω–∞",
        type: "–ö–≤–∞—Ä—Ç–∏—Ä–∞",
        action: "–∞—Ä–µ–Ω–¥–∞",
        amenities: ["–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Wi-Fi"],
        entertainment: ["smart tv", "–±–∞—Å—Å–µ–π–Ω"],
        images: [
          "https://a0.muscache.com/im/pictures/hosting/Hosting-1127457818921957716/original/7d52b1e9.jpeg",
          "https://a0.muscache.com/im/pictures/hosting/Hosting-1127457818921957716/original/bfe7694e.jpeg",
          "https://a0.muscache.com/im/pictures/hosting/Hosting-1127457818921957716/original/c510e165.jpeg"
        ]
      },
      {
        id: 4,
        title: "–≠–ª–∏—Ç–Ω–∞—è —Ä–µ–∑–∏–¥–µ–Ω—Ü–∏—è",
        price: "40000 ‚Ç∏",
        area: "150 –º2",
        rooms: 4,
        city: "–ê–ª–º–∞—Ç—ã",
        type: "–î–æ–º",
        action: "–ø–æ–∫—É–ø–∫–∞",
        amenities: ["–±–∞—Å—Å–µ–π–Ω", "–∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä"],
        entertainment: ["smart tv"],
        images: [
          "https://a0.muscache.com/im/pictures/3608ef81.jpeg",
          "https://a0.muscache.com/im/pictures/bd968c8e.jpeg",
          "https://a0.muscache.com/im/pictures/67b9720f.jpeg"
        ]
      },
      {
        id: 5,
        title: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–µ–Ω—Ç—Ö–∞—É—Å",
        price: "33000 ‚Ç∏",
        area: "90 –º2",
        rooms: 3,
        city: "–ê—Å—Ç–∞–Ω–∞",
        type: "–ö–≤–∞—Ä—Ç–∏—Ä–∞",
        action: "–ø–æ–∫—É–ø–∫–∞",
        amenities: ["–∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä", "–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Wi-Fi"],
        entertainment: ["smart tv", "–±–∞—Å—Å–µ–π–Ω"],
        images: [
          "https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6/original.jpg",
          "https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6/original.jpg",
          "https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6/original.jpg"
        ]
      },
      {
        id: 6,
        title: "–£—é—Ç–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å —Ä–µ–º–æ–Ω—Ç–æ–º",
        price: "25000 ‚Ç∏",
        area: "60 –º2",
        rooms: 2,
        city: "–ê–ª–º–∞—Ç—ã",
        type: "–ö–≤–∞—Ä—Ç–∏—Ä–∞",
        action: "–∞—Ä–µ–Ω–¥–∞",
        amenities: ["–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Wi-Fi"],
        entertainment: ["smart tv"],
        images: [
          "https://a0.muscache.com/im/pictures/miso/Hosting-1302918638960749253/original/image1.jpeg",
          "https://a0.muscache.com/im/pictures/miso/Hosting-1302918638960749253/original/image2.jpeg",
          "https://a0.muscache.com/im/pictures/miso/Hosting-1302918638960749253/original/image3.jpeg"
        ]
      }
    ];
    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å —É—á–µ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤: —á–µ–∫–±–æ–∫—Å—ã, —Ü–µ–Ω–∞, –ø–ª–æ—â–∞–¥—å –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç (–ø–æ select)
    function renderListings() {
      const filters = {
        action: getCheckedValues("action"),
        type: getCheckedValues("type"),
        city: getCheckedValues("city"),
        amenities: getCheckedValues("amenities"),
        entertainment: getCheckedValues("entertainment")
      };
      const priceMax = parseInt(document.getElementById("price").value, 10);
      const areaMax = parseInt(document.getElementById("area").value, 10);
      const roomsSelected = parseInt(document.getElementById("roomsSelect").value, 10);
      
      const filtered = listings.filter((item) => {
        const matchesFilters = Object.entries(filters).every(([key, values]) =>
          values.length === 0 ||
          values.some(v =>
            Array.isArray(item[key])
              ? item[key].includes(v)
              : item[key] === v
          )
        );
        const listingPrice = parsePrice(item.price);
        const matchesPrice = listingPrice <= priceMax;
        const listingArea = parseArea(item.area);
        const matchesArea = listingArea <= areaMax;
        // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ "–õ—é–±–æ–µ" (0), —Ç–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
        const matchesRooms = roomsSelected === 0 ? true : (item.rooms === roomsSelected);
        return matchesFilters && matchesPrice && matchesArea && matchesRooms;
      });
      
      const container = document.getElementById("listings");
      container.innerHTML = filtered.map((item) =>
        `<div class="listing">
          <div class="slider">
            <img id="listing-image-${item.id}" src="${item.images[0]}" alt="${item.title}">
            <div class="slider-controls">
              ${item.images.map((_, index) =>
                `<button class="slider-btn" onclick="changeSlide(${item.id}, ${index})"></button>`
              ).join('')}
            </div>
          </div>
          <div class="listing-info">
            <h3>${item.title}</h3>
            <p>${item.city} ‚Ä¢ ${item.type}</p>
            <p>${item.price}</p>
            <p>${item.action}</p>
            <p>–ü–ª–æ—â–∞–¥—å: ${item.area}</p>
            <p>–ö–æ–º–Ω–∞—Ç: ${item.rooms}</p>
          </div>
        </div>`
      ).join('');
    }
    // –§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–ª–∞–π–¥–µ—Ä–µ
    function changeSlide(listingId, index) {
      const listing = listings.find(item => item.id === listingId);
      if (!listing) return;
      const imgElement = document.getElementById("listing-image-" + listingId);
      if (imgElement) {
        imgElement.src = listing.images[index];
      }
    }
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞
    function getCheckedValues(name) {
      return Array.from(document.querySelectorAll(`input[name="${name}"]:checked`)).map(i => i.value);
    }
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    document.querySelectorAll(".filters-panel input").forEach(i => {
      i.addEventListener("change", renderListings);
    });
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ—ë
    window.addEventListener("click", (e) => {
      if (!e.target.closest(".filters-panel") && !e.target.closest(".filter-btn")) {
        document.getElementById("filtersPanel").style.display = "none";
      }
    });
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ –Ω–∞–∂–∞—Ç–∏—é Enter –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
    document.getElementById("search").addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        sendQuery();
      }
    });
    // –ò–∑–Ω–∞—á–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
    renderListings();

    function switchLanguage(lang) {
      if (lang === 'en') {
        window.location.href = 'index1_en.html';
      } else if (lang === 'ru') {
        window.location.href = 'index1.html';
      }
    }
  </script>
</body>
</html>


